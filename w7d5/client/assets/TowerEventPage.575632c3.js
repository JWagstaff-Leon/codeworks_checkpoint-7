var T=Object.defineProperty;var S=(t,e,s)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var p=(t,e,s)=>(S(t,typeof e!="symbol"?e+"":e,s),s);import{i as u,u as C,c as r,o as P,b as i,d,l as g,e as f,f as n,j as h,g as E,n as b}from"./vendor.33b87fd1.js";import{_ as F,l as w,t as l,a as v,c as m,P as j,A as c}from"./index.6d4a2a82.js";class y{constructor(){p(this,"steps",[])}load(){const e=this.steps.map(s=>s.callback(...s.args));return this.steps=[],Promise.all(e)}step(e,s=[]){this.steps.push({callback:e,args:s})}}const I={watch:{async"route.params.id"(t){if(t){w.log("Event route change detected"),this.hasFadein=!0,this.loading=!0,l.clearActive(),v.clearActive(),m.clearActive();const e=new y;e.step(l.getById,[t]),e.step(v.getByEvent,[t]),e.step(m.getByEvent,[t]),await e.load(),this.loading=!1,setTimeout(()=>this.hasFadein=!1,150)}}},setup(){const t=u(!0),e=C(),s=r(()=>c.attendees),o=u(!0);return P(async()=>{try{l.clearActive(),v.clearActive(),m.clearActive(),t.value=!0;const a=new y;a.step(l.getById,[e.params.id]),a.step(v.getByEvent,[e.params.id]),a.step(m.getByEvent,[e.params.id]),await a.load(),t.value=!1,setTimeout(()=>o.value=!1,150)}catch(a){w.error("[TowerEventPage.vue > onMounted]",a.message),j.toast(a.message,"error")}}),{route:e,loading:t,hasFadein:o,towerEvent:r(()=>c.activeTowerEvent),attendees:s,account:r(()=>c.account),comments:r(()=>(c.comments.forEach(a=>a.isAttending=!!s.value.find(_=>_.id===a.creator.id)),c.comments))}}},L={class:"container"},N={class:"row mt-4"},V={class:"col-12"},D={key:0,class:"row mt-4"},M={class:"col-12"},z={class:"row mt-5"},q={class:"col-12 col-xl-10 offset-xl-1"};function G(t,e,s,o,a,_){const A=i("LoadingSpinner"),k=i("TowerEventDetails"),x=i("Attendees"),B=i("Comments");return o.loading?(d(),g(A,{key:0})):(d(),f("div",{key:1,class:b(["flex-grow-1 d-flex flex-column align-items-center bg-dark",{"fade-in":o.hasFadein}])},[n("div",L,[n("div",N,[n("div",V,[o.towerEvent?(d(),g(k,{key:0,towerEvent:o.towerEvent},null,8,["towerEvent"])):h("",!0)])]),o.towerEvent.isCanceled?h("",!0):(d(),f("div",D,[n("div",M,[E(x,{attendees:o.attendees},null,8,["attendees"])])])),n("div",z,[n("div",q,[E(B,{comments:o.comments},null,8,["comments"])])])])],2))}var O=F(I,[["render",G],["__scopeId","data-v-871f6f60"]]);export{O as default};
